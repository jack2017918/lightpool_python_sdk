Metadata-Version: 2.4
Name: lightpool-sdk
Version: 0.1.0
Summary: Python SDK for LightPool blockchain with spot trading support
Home-page: https://github.com/lightpool/lightpool-python-sdk
Author: LightPool Team
Author-email: team@lightpool.com
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: aiohttp>=3.8.0
Requires-Dist: cryptography>=3.4.8
Requires-Dist: eth-account>=0.8.0
Requires-Dist: eth-utils>=2.0.0
Requires-Dist: pydantic>=1.10.0
Requires-Dist: typing-extensions>=4.0.0
Requires-Dist: asyncio-mqtt>=0.11.0
Requires-Dist: websockets>=10.0
Requires-Dist: pytest>=7.0.0
Requires-Dist: pytest-asyncio>=0.21.0
Requires-Dist: pytest-cov>=4.0.0
Requires-Dist: black>=22.0.0
Requires-Dist: flake8>=5.0.0
Requires-Dist: mypy>=0.991
Requires-Dist: attrs2bin>=0.0.1
Requires-Dist: attrs>=21.0.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Requires-Dist: black>=22.0.0; extra == "dev"
Requires-Dist: flake8>=5.0.0; extra == "dev"
Requires-Dist: mypy>=0.991; extra == "dev"
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: provides-extra
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# LightPool Python SDK

ä¸€ä¸ªç”¨äºä¸LightPoolåŒºå—é“¾è¿›è¡Œäº¤äº’çš„Python SDKï¼Œç‰¹åˆ«ä¸“æ³¨äºç°è´§äº¤æ˜“åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” **åŠ å¯†æ“ä½œ**: ç”Ÿæˆå¯†é’¥å¯¹ã€ç­¾åäº¤æ˜“
- ğŸ”§ **äº¤æ˜“æ„å»º**: æµç•…çš„APIç”¨äºæ„å»ºå„ç§æ“ä½œçš„äº¤æ˜“
- ğŸŒ **RPCå®¢æˆ·ç«¯**: HTTPå®¢æˆ·ç«¯ç”¨äºä¸LightPoolèŠ‚ç‚¹é€šä¿¡
- ğŸª™ **ä»£å¸æ“ä½œ**: å†…ç½®æ”¯æŒä»£å¸åˆ›å»ºã€è½¬è´¦ã€é“¸é€ ã€åˆå¹¶å’Œåˆ†å‰²
- ğŸ“ˆ **ç°è´§äº¤æ˜“**: å®Œæ•´çš„ç°è´§äº¤æ˜“åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä¸‹å•ã€æ’¤å•ã€æŸ¥è¯¢è®¢å•ç°¿
- âš¡ **å¼‚æ­¥æ”¯æŒ**: ä½¿ç”¨asyncioçš„å®Œæ•´å¼‚æ­¥/ç­‰å¾…æ”¯æŒ

## å®‰è£…

```bash
pip install -r requirements.txt
```

## å¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºç­¾åè€…

```python
from lightpool_sdk import Signer

# ç”Ÿæˆæ–°çš„éšæœºå¯†é’¥å¯¹
signer = Signer.new()
address = signer.address()
print(f"åœ°å€: {address}")

# æˆ–è€…ä»ç°æœ‰ç§é’¥å¯¼å…¥
secret_key_bytes = bytes([0] * 32)  # æ‚¨çš„ç§é’¥å­—èŠ‚
signer = Signer.from_secret_key_bytes(secret_key_bytes)
```

### 2. è¿æ¥åˆ°èŠ‚ç‚¹

```python
from lightpool_sdk import LightPoolClient

client = LightPoolClient("http://localhost:26300", timeout=30)

# æµ‹è¯•è¿æ¥
is_healthy = await client.health_check()
print(f"èŠ‚ç‚¹å¥åº·çŠ¶æ€: {is_healthy}")
```

### 3. åˆ›å»ºå¹¶æäº¤äº¤æ˜“

```python
from lightpool_sdk import (
    TransactionBuilder, ActionBuilder, CreateTokenParams,
    Address, U256
)

# åˆ›å»ºä»£å¸å‚æ•°
create_params = CreateTokenParams(
    name="æˆ‘çš„ä»£å¸",
    symbol="MYT",
    decimals=18,
    total_supply=U256(1_000_000),
    mintable=True
)

# æ„å»ºæ“ä½œ
action = ActionBuilder.create_token(
    Address.two(),  # åˆçº¦åœ°å€
    Address.two(),  # æ¨¡å—åœ°å€
    create_params
)

# æ„å»ºå¹¶ç­¾åäº¤æ˜“
verified_tx = TransactionBuilder.new()\
    .sender(signer.address())\
    .nonce(1)\
    .gas_budget(1_000_000)\
    .gas_price(1)\
    .add_action(action)\
    .build_and_sign(signer)

# æäº¤åˆ°ç½‘ç»œ
response = await client.submit_transaction(verified_tx)
print(f"äº¤æ˜“å“ˆå¸Œ: {response.digest}")
```

## ç°è´§äº¤æ˜“ç¤ºä¾‹

### åˆ›å»ºå¸‚åœº

```python
from lightpool_sdk import CreateMarketParams, MarketState

# åˆ›å»ºBTC/USDTå¸‚åœº
market_params = CreateMarketParams(
    name="BTC/USDT",
    base_token=btc_token_address,
    quote_token=usdt_token_address,
    min_order_size=100_000,  # 0.1 BTCæœ€å°è®¢å•
    tick_size=1_000_000,     # 1 USDTä»·æ ¼ç²¾åº¦
    maker_fee_bps=10,        # 0.1% makerè´¹ç”¨
    taker_fee_bps=20,        # 0.2% takerè´¹ç”¨
    allow_market_orders=True,
    state=MarketState.Active,
    limit_order=True
)

action = ActionBuilder.create_market(
    SPOT_CONTRACT_ADDRESS,
    market_params
)

tx = TransactionBuilder.new()\
    .sender(signer.address())\
    .add_action(action)\
    .build_and_sign(signer)

response = await client.submit_transaction(tx)
```

### ä¸‹å•

```python
from lightpool_sdk import PlaceOrderParams, OrderSide, TimeInForce, OrderParamsType

# é™ä»·ä¹°å•
order_params = PlaceOrderParams(
    side=OrderSide.Buy,
    amount=1_000_000,  # 1 BTC (6ä½å°æ•°)
    order_type=OrderParamsType.Limit(
        tif=TimeInForce.GTC
    ),
    limit_price=50_000_000_000  # 50,000 USDT (6ä½å°æ•°)
)

action = ActionBuilder.place_order(
    market_address,
    market_id,
    balance_id,
    order_params
)

tx = TransactionBuilder.new()\
    .sender(signer.address())\
    .add_action(action)\
    .build_and_sign(signer)

response = await client.submit_transaction(tx)
```

### æ’¤å•

```python
from lightpool_sdk import CancelOrderParams

cancel_params = CancelOrderParams(
    order_id=order_id
)

action = ActionBuilder.cancel_order(
    market_address,
    market_id,
    cancel_params
)

tx = TransactionBuilder.new()\
    .sender(signer.address())\
    .add_action(action)\
    .build_and_sign(signer)

response = await client.submit_transaction(tx)
```

## è¿è¡Œç¤ºä¾‹

### è¿è¡Œç®€å•ç°è´§å®¢æˆ·ç«¯ç¤ºä¾‹:
```bash
python examples/simple_spot_client.py
```

### è¿è¡Œé«˜é¢‘äº¤æ˜“ç¤ºä¾‹:
```bash
python examples/burst_spot_client.py
```

## é”™è¯¯å¤„ç†

SDKä½¿ç”¨å¼‚å¸¸è¿›è¡Œé”™è¯¯å¤„ç†:

```python
try:
    response = await client.submit_transaction(verified_tx)
    print("äº¤æ˜“æäº¤æˆåŠŸ!")
    print(f"å“ˆå¸Œ: {response.digest}")
    print(f"æ”¶æ®: {response.receipt}")
except NetworkError as e:
    print(f"ç½‘ç»œé”™è¯¯: {e}")
except CryptoError as e:
    print(f"åŠ å¯†é”™è¯¯: {e}")
except TransactionError as e:
    print(f"äº¤æ˜“é”™è¯¯: {e}")
except Exception as e:
    print(f"å…¶ä»–é”™è¯¯: {e}")
```

## å¼€å‘

### å‰ç½®æ¡ä»¶
- Python 3.8+ (æ¨èPython 3.9+)
- è¿è¡Œä¸­çš„LightPoolèŠ‚ç‚¹ï¼ˆç”¨äºé›†æˆæµ‹è¯•å’Œç¤ºä¾‹ï¼‰

**æ³¨æ„**: æœ¬é¡¹ç›®å·²é’ˆå¯¹Python 3.8è¿›è¡Œäº†å…¼å®¹æ€§ä¼˜åŒ–ï¼Œæ”¯æŒè¾ƒè€çš„Pythonç‰ˆæœ¬ã€‚

### å®‰è£…
```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å®‰è£…SDKåˆ°å¼€å‘ç¯å¢ƒï¼ˆæ¨èï¼‰
pip install -e .

# éªŒè¯å®‰è£…
python test_import.py
```

### æ„å»º
```bash
python setup.py build
```

### æµ‹è¯•
```bash
# ä½¿ç”¨è‡ªå®šä¹‰è„šæœ¬ï¼ˆæ¨èï¼‰
python run_tests.py --run-integration  # è¿è¡Œé›†æˆæµ‹è¯•
python run_tests.py --unit-only        # åªè¿è¡Œå•å…ƒæµ‹è¯•
python run_tests.py --all              # è¿è¡Œæ‰€æœ‰æµ‹è¯•

# ä½¿ç”¨pytestç›´æ¥è¿è¡Œ
python -m pytest tests/ -m "not integration"  # å•å…ƒæµ‹è¯•
python -m pytest tests/integration/ -m integration  # é›†æˆæµ‹è¯•
python -m pytest tests/                          # æ‰€æœ‰æµ‹è¯•
```

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ä¸LightPoolé¡¹ç›®ç›¸åŒçš„è®¸å¯è¯ã€‚ 
